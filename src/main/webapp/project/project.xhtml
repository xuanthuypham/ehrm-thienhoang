<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      
      >
    <h:body>
    	
    	<ui:composition template="/template/common/commonLayout.xhtml">
    		<!-- Thay ten trang tuong ung -->
    		<ui:define name="title">
    			Create/Edit project
    		</ui:define>
    	
    		<ui:define name="content">
    		<!-- xoa phan phan khung duoi di, thay vao noi dung tuong ung. -->
    		<!-- =================================================================================================-->
    			
    		<div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
              	<h2><strong>Create/Edit project</strong></h2>
              	<hr/>
                <div class="x_panel">
                  <div class="x_title">
                    <h2>Search</h2>
                    
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                  	<!-- search-->
			        <div class="container">
			            <h:form id="form">
			            	<div class="row">

				                <div class='col-sm-4'>
				                    Project code:
				                    <div class="form-group">
				                        <div class="form-group">
				                            
				                            <h:inputText id="code" styleClass="form-control" value="#{projects_bean.code}" />
				                            
				                        </div>
				                    </div>
				                </div>

				                <div class='col-sm-4'>
				                    Project name:
				                    <div class="form-group">
				                        <div class="form-group" >
				                            <h:inputText id="name" styleClass="form-control" value="#{projects_bean.name}" />
				                            
				                        </div>
				                    </div>
				                </div>
				                
				                 <div class='col-sm-4'>
				                    Status:
				                    <div class="form-group">
				                        <div class="form-group" >
											<h:selectOneMenu id="yyy" styleClass="form-control" value = "#{projects_bean.status}"> 
									            <f:selectItem itemValue = "0" itemLabel = "-[Select]-" /> 
									            <f:selectItem itemValue = "744" itemLabel = "Active" /> 
									            <f:selectItem itemValue = "745" itemLabel = "Inactive" /> 
									            <f:selectItem itemValue = "746" itemLabel = "Close" /> 
									            
									         </h:selectOneMenu>  
				                            
				                        </div>
				                    </div>
				                </div>

				                <div class="clearfix"></div>
				                <div class='col-sm-4'>
				                    
				                    <h:commandButton styleClass="btn btn-primary" action="#{projects_bean.search()}" value="Search" >
				                    	<f:ajax execute=" code name yyy" render=":datatable"></f:ajax>
				                    </h:commandButton>
				                    <h:commandButton styleClass="btn btn-primary" action="#{projects_bean.showAll()}" value="Show All" />
				                    <button type="reset" class="btn btn-primary">Reset</button>
									
				                </div>
				                
				                 
				            </div>
			            </h:form>
			        </div>
			        
			        
			    </div>
                </div>
                <!-- show table-->
                <div class="x_panel">
                  <div class="x_title">
                    <h2>List projects</h2>
                    
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content">
                  	<!-- search-->
			        <div class="container">
			            
			            	<div class="row">
				                <!--<div style="padding-top: 6px;">
				                	<div class='col-sm-4' style="padding-top: 5px;">
					                    <label class="control-label">Drag a column to this area to group:</label>
					                </div>
					                
					                <div class="col-sm-4 float-right" >
					                    
					                    <div class='col-sm-4' >
					                    	<label class="control-label float-right" >Search:</label>
					                    </div>
					                    <div class='col-sm-8'>
					                    	 <div class="form-group" >
						                        <h:inputText styleClass="form-control" id="txtSearch" onkeyup="searchTable()" />
						                    </div>
					                    </div>
					                   
					                </div> 
				                </div>-->
				                <a href=""></a>
				                <div class="clearfix"></div>
				                <div class="col-sm-12">
				                	<h:dataTable id= "datatable" styleClass="table table-striped table-bordered dataTable no-footer" var="prr" value="#{projects_bean.lst}" >
									  		<h:column>
												<f:facet name="header">
													<!-- <h:outputText value="Mã"/> -->
													<span style="text-align: center;" class="glyphicon glyphicon-file" aria-hidden="true"></span>
												</f:facet>
												<a href="#" onclick="project_pass_update(#{prr.projectId},'#{prr.projectCode}','#{prr.projectName}','#{prr.description}',#{prr.masterDatas.masterDataId})" data-toggle="modal" data-target="#modal-edit">
											    		<i class="fa fa-edit"></i></a>
											    <a href="#" onclick="project_pass_del(#{prr.projectId})" data-toggle="modal" data-target="#modal-delete">
											    		<i class="fa fa-trash"></i></a>
											</h:column>
											<h:column>
												<f:facet name="header">
													<h:outputText value="Project code"/>
												</f:facet>
												<h:outputText value="#{prr.projectCode}"/>
											</h:column>
											<h:column>
												<f:facet name="header">
													<h:outputText value="Project name"/>
												</f:facet>
												<h:outputText value="#{prr.projectName}"/>
											</h:column>
											<h:column>
												<f:facet name="header">
													<h:outputText value="Description"/>
												</f:facet>
												<h:outputText value="#{prr.description}"/>
											</h:column>
											<h:column>
												<f:facet name="header">
													<h:outputText value="Status"/>
												</f:facet>
												<h:outputText value="#{prr.masterDatas.masterDataCode}"/>
											</h:column>
											
									  
									</h:dataTable>
				                </div>
				                <div class="clearfix"></div>
				                

						        <div class="ln_solid"></div>
						        <div class="col-sm-12 " >
									<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal-add">Add New</button>

									<button class="btn btn-primary" > Export </button>
								</div>
				            </div>
			            
			        </div>
			        
			        
			    </div>
                </div>
                <div class="x_panel">
                	
                	
                </div>
              </div>
            </div>
            <!-- Add new modal -->
            <div class="modal fade bs-example-modal-lg" id="modal-add" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-delete">
                      <div class="modal-content">

                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span>
                          </button>
                          <h4 class="modal-title" id="myModalLabel">Add New Project: </h4>
                        </div>
                        <h:form>
                        <div class="modal-body">
                          	 <div class='col-sm-12'>
				                   <label >Project code :</label>
				                    <div class="form-group">
				                        <div class="form-group" >
				                            <h:inputText styleClass="form-control" value="#{code}" />
				                            
				                        </div>
				                    </div>
				                </div>
			                 <div class='col-sm-12'>
				                    <label >Project name :</label>
				                    <div class="form-group">
				                        <div class="form-group" >
				                            <h:inputText styleClass="form-control" value="#{name}" />
				                            
				                        </div>
				                    </div>
				                </div>
			                 <div class='col-sm-12'>
				                <div class="form-group">
					                <label >Status :</label>
					                <h:selectOneMenu id="xxx" styleClass="form-control" value = "#{status}"> 
									            
									            <f:selectItem itemValue = "744" itemLabel = "Active" /> 
									            <f:selectItem itemValue = "745" itemLabel = "Inactive" /> 
									            <f:selectItem itemValue = "746" itemLabel = "Close" /> 
									            
									</h:selectOneMenu>  
				                            
				                </div>
			                 </div>
			                 <div class='col-sm-12'>
				                    <label >Description :</label>
				                    <div class="form-group">
				                        <div class="form-group" >
				                            <h:inputTextarea row = "40" col = "10" styleClass="form-control textarea-cfg" value = "#{description}" />
				                            
				                        </div>
				                    </div>
				                </div>
                        </div>
                        <div class="clearfix"></div>

                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button type="reset" class="btn btn-info">Reset </button>
                          <h:commandButton styleClass="btn btn-primary" action="#{projects_bean.insert(code,name,description,status)}" value="Save" />
                        </div>
                    	</h:form>
                      </div>
                    </div>
            </div>
			<!--  Add new  modal -->

			<!-- Edit modal -->
            <div class="modal fade bs-example-modal-lg" id="modal-edit" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-lg modal-delete">
                      <div class="modal-content">

                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span>
                          </button>
                          <h4 class="modal-title" id="myModalLabel">Edit Project :</h4>
                        </div>
                        <h:form>
                        <div class="modal-body">
                        	<div class="hd_id">
                        		<h:inputHidden id="#{'hd_id'}" styleClass="form-control" value="#{eid}" />
                        	</div>
                          	 <div class='col-sm-12'>
				                   <label >Project code :</label>
				                    <div class="form-group ">
				                        <div class="form-group code" >
				                            <h:inputText id="code" styleClass="form-control" value="#{ecode}" />
				                            
				                        </div>
				                    </div>
				                </div>
			                 <div class='col-sm-12'>
				                    <label >Project name :</label>
				                    <div class="form-group">
				                        <div class="form-group name" >
				                            <h:inputText id="#{'name'}" styleClass="form-control" value="#{ename}" />
				                            
				                        </div>
				                    </div>
				                </div>
			                 <div class='col-sm-12'>
				                <div class="form-group status">
					                <label >Status :</label>
					                <h:selectOneMenu id="status" styleClass="form-control" value = "#{estatus}"> 
									            
									            <f:selectItem itemValue = "744" itemLabel = "Active" /> 
									            <f:selectItem itemValue = "745" itemLabel = "Inactive" /> 
									            <f:selectItem itemValue = "746" itemLabel = "Close" /> 
									            
									</h:selectOneMenu>  
				                            
				                </div>
			                 </div>
			                 <div class='col-sm-12'>
				                    <label >Description :</label>
				                    <div class="form-group">
				                        <div class="form-group description" >
				                            <h:inputTextarea id="description" row = "40" col = "10" styleClass="form-control textarea-cfg" value = "#{edescription}" />
				                            
				                        </div>
				                    </div>
				                </div>
                        </div>
                        <div class="clearfix"></div>

                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                          <button type="reset" class="btn btn-info">Reset </button>
                          <h:commandButton styleClass="btn btn-primary" action="#{projects_bean.update(eid,ecode,ename,edescription,estatus)}" value="Save" />
                        </div>
                    	</h:form>
                      </div>
                    </div>
            </div>
			<!--  Edit modal -->
			<!-- Delete modal -->
            <div class="modal fade bs-example-modal-lg" id="modal-delete" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-sm modal-delete">
                      <div class="modal-content">

                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span>
                          </button>
                          <h4 class="modal-title" id="myModalLabel">Confirm:</h4>
                        </div>
                        
                        <div class="modal-footer">
                        	<h:form>
                        		<div class="edit">
                        			<h:inputHidden id="txtid" value="#{txtidx}" />
                        		</div>
                          		<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                          
                          		<h:commandButton styleClass="btn btn-primary" action="#{projects_bean.delete(txtidx)}" value="Delete" />
                          </h:form>
                        </div>

                      </div>
                    </div>
            </div>
			<!--  Delete modal -->

        	<script type="text/javascript">
			    function project_pass_del(id) {
			    	document.querySelector(".edit input").value = id; 
			    };
			    function project_pass_update(id,code,name,description,status) {
			    	document.querySelector(".hd_id input").value = id; 
			    	document.querySelector(".code input").value = code; 
			    	document.querySelector(".name input").value = name; 
			    	document.querySelector(".description textarea").value = description; 
			    	document.querySelector(".status select").value = status; 
			    };
			    
			</script>
            <!-- =================================================================================================-->	
    		</ui:define>
		</ui:composition>
	
    </h:body>

</html>